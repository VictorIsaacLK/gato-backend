"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const Mail_1 = global[Symbol.for('ioc.use')]("Adonis/Addons/Mail");
const Env_1 = __importDefault(global[Symbol.for('ioc.use')]("Adonis/Core/Env"));
const { Vonage } = require('@vonage/server-sdk');
class Sms extends Mail_1.BaseMailer {
    constructor(user) {
        super();
        this.user = user;
    }
    async prepare() {
        const vonage = new Vonage({
            apiKey: Env_1.default.get('API_KEY'),
            apiSecret: Env_1.default.get('API_SECRET'),
        });
        const from = "Hollow Universe Administration";
        const to = `52${this.user.phone}`;
        const text = `Tu codigo de verificacion para hollow universe es ${this.user.code}\n\n\n`;
        await vonage.sms.send({ to, from, text })
            .then(resp => { console.log('Mensaje enviado de manera exitosa'); console.log(resp); })
            .catch(err => { console.log('Hubo un error enviando el mensaje.'); console.error(err); });
    }
}
exports.default = Sms;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiU21zLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiU21zLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7O0FBQUEsbUVBQXFFO0FBRXJFLGdGQUF1QztBQUN2QyxNQUFNLEVBQUUsTUFBTSxFQUFFLEdBQUcsT0FBTyxDQUFDLG9CQUFvQixDQUFDLENBQUE7QUFFaEQsTUFBcUIsR0FBSSxTQUFRLGlCQUFVO0lBQ3pDLFlBQW9CLElBQVU7UUFFNUIsS0FBSyxFQUFFLENBQUE7UUFGVyxTQUFJLEdBQUosSUFBSSxDQUFNO0lBRzlCLENBQUM7SUFHTSxLQUFLLENBQUMsT0FBTztRQUNsQixNQUFNLE1BQU0sR0FBRyxJQUFJLE1BQU0sQ0FBQztZQUN4QixNQUFNLEVBQUUsYUFBRyxDQUFDLEdBQUcsQ0FBQyxTQUFTLENBQUM7WUFDMUIsU0FBUyxFQUFFLGFBQUcsQ0FBQyxHQUFHLENBQUMsWUFBWSxDQUFDO1NBQ2pDLENBQUMsQ0FBQTtRQUdGLE1BQU0sSUFBSSxHQUFHLGdDQUFnQyxDQUFBO1FBQzdDLE1BQU0sRUFBRSxHQUFHLEtBQUssSUFBSSxDQUFDLElBQUksQ0FBQyxLQUFLLEVBQUUsQ0FBQTtRQUNqQyxNQUFNLElBQUksR0FBRyxxREFBcUQsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLFFBQVEsQ0FBQTtRQUV4RixNQUFNLE1BQU0sQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLEVBQUMsRUFBRSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUMsQ0FBQzthQUNsQixJQUFJLENBQUMsSUFBSSxDQUFDLEVBQUUsR0FBRyxPQUFPLENBQUMsR0FBRyxDQUFDLG1DQUFtQyxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO2FBQ3RGLEtBQUssQ0FBQyxHQUFHLENBQUMsRUFBRSxHQUFHLE9BQU8sQ0FBQyxHQUFHLENBQUMsb0NBQW9DLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUNoSCxDQUFDO0NBQ0Y7QUF0QkQsc0JBc0JDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQmFzZU1haWxlciwgTWVzc2FnZUNvbnRyYWN0IH0gZnJvbSAnQGlvYzpBZG9uaXMvQWRkb25zL01haWwnXG5pbXBvcnQgVXNlciBmcm9tICdBcHAvTW9kZWxzL1VzZXInXG5pbXBvcnQgRW52IGZyb20gJ0Bpb2M6QWRvbmlzL0NvcmUvRW52JztcbmNvbnN0IHsgVm9uYWdlIH0gPSByZXF1aXJlKCdAdm9uYWdlL3NlcnZlci1zZGsnKVxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBTbXMgZXh0ZW5kcyBCYXNlTWFpbGVyIHtcbiAgY29uc3RydWN0b3IocHJpdmF0ZSB1c2VyOiBVc2VyKVxuICB7XG4gICAgc3VwZXIoKVxuICB9XG5cblxuICBwdWJsaWMgYXN5bmMgcHJlcGFyZSgpIHtcbiAgICBjb25zdCB2b25hZ2UgPSBuZXcgVm9uYWdlKHtcbiAgICAgIGFwaUtleTogRW52LmdldCgnQVBJX0tFWScpLFxuICAgICAgYXBpU2VjcmV0OiBFbnYuZ2V0KCdBUElfU0VDUkVUJyksXG4gICAgfSlcblxuICAgIC8vIERhdG9zIGRlbCB1c3VhcmlvXG4gICAgY29uc3QgZnJvbSA9IFwiSG9sbG93IFVuaXZlcnNlIEFkbWluaXN0cmF0aW9uXCJcbiAgICBjb25zdCB0byA9IGA1MiR7dGhpcy51c2VyLnBob25lfWBcbiAgICBjb25zdCB0ZXh0ID0gYFR1IGNvZGlnbyBkZSB2ZXJpZmljYWNpb24gcGFyYSBob2xsb3cgdW5pdmVyc2UgZXMgJHt0aGlzLnVzZXIuY29kZX1cXG5cXG5cXG5gXG5cbiAgICBhd2FpdCB2b25hZ2Uuc21zLnNlbmQoe3RvLCBmcm9tLCB0ZXh0fSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKHJlc3AgPT4geyBjb25zb2xlLmxvZygnTWVuc2FqZSBlbnZpYWRvIGRlIG1hbmVyYSBleGl0b3NhJyk7IGNvbnNvbGUubG9nKHJlc3ApOyB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgLmNhdGNoKGVyciA9PiB7IGNvbnNvbGUubG9nKCdIdWJvIHVuIGVycm9yIGVudmlhbmRvIGVsIG1lbnNhamUuJyk7IGNvbnNvbGUuZXJyb3IoZXJyKTsgfSk7XG4gIH1cbn1cbiJdfQ==